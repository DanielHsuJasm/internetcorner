<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InternetCorner - 數位回憶書</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Canvas 星空背景 -->
    <canvas id="star-canvas"></canvas>

    <!-- 主容器 -->
    <div class="main-container">
        <!-- 網站標題 -->
        <div class="site-title">
            <h1>InternetCorner</h1>
            <p>我的數位回憶收藏</p>
        </div>

        <!-- 調試信息 -->
        <div style="position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.7); color: white; padding: 10px; border-radius: 5px; font-size: 12px; z-index: 9999;">
            書籤總數: {{ bookmarks|length }}
            {% for bookmark in bookmarks %}
            <br>{{ loop.index }}: {{ bookmark.title }}
            {% endfor %}
        </div>

        <!-- 書本容器（確保只有一個） -->
        <div class="book-container">
            <!-- 書本本體 -->
            <div class="book">
                <div class="book-cover">
                    <h2>數位回憶書</h2>
                    <p class="subtitle">Digital Memory Book</p>
                    <div class="book-decoration">
                        <div class="golden-line"></div>
                        <div class="corner-ornament">✦</div>
                    </div>
                </div>
            </div>

            <!-- 書籤容器（隱藏在書本內部） -->
            <div class="bookmarks-container">
                {% for bookmark in bookmarks %}
                <div class="bookmark bookmark-debug-{{ loop.index }}" 
                     data-bookmark-id="{{ bookmark.id }}"
                     data-enabled="{{ bookmark.enabled|lower }}"
                     data-debug-index="{{ loop.index }}"
                     {% if bookmark.enabled %}
                     data-route="{{ url_for(bookmark.route) }}"
                     {% else %}
                     data-title="{{ bookmark.title|e }}"
                     {% endif %}
                     style="border: 2px solid red; /* 調試邊框 */">
                    <div class="bookmark-tab bookmark-color-{{ loop.index }}" 
                         style="position: relative;">
                        <div class="bookmark-icon">{{ bookmark.icon }}</div>
                        <div class="bookmark-text">
                            <div class="bookmark-title">{{ bookmark.title }}</div>
                            <div class="bookmark-date">{{ bookmark.date }}</div>
                        </div>
                        {% if not bookmark.enabled %}
                        <div class="coming-soon-badge">敬請期待</div>
                        {% endif %}
                        <!-- 調試標籤 -->
                        <div style="position: absolute; top: -15px; left: 5px; background: yellow; color: black; font-size: 10px; padding: 2px;">
                            #{{ loop.index }}
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- 版本資訊 -->
        <div class="version-info">
            <p>Version 1.0.0 - Built with ❤️</p>
        </div>
    </div>

    <!-- 即將推出提示框 -->
    <div id="coming-soon-modal" class="modal">
        <div class="modal-content">
            <div class="modal-icon">🚧</div>
            <h3 id="feature-name">功能開發中</h3>
            <p>這個功能正在努力開發中，請耐心等待！</p>
            <div class="modal-buttons">
                <button onclick="closeComingSoonModal()">好的</button>
            </div>
        </div>
    </div>

    <!-- 載入腳本 -->
    <script src="{{ url_for('static', filename='js/star-background.js') }}"></script>
    <script src="{{ url_for('static', filename='js/home.js') }}"></script>
    
    <!-- 調試腳本 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🔍 調試信息:');
            console.log('書籤總數:', document.querySelectorAll('.bookmark').length);
            
            document.querySelectorAll('.bookmark').forEach((bookmark, index) => {
                const title = bookmark.querySelector('.bookmark-title')?.textContent;
                const id = bookmark.dataset.bookmarkId;
                const colorClass = bookmark.querySelector('.bookmark-tab')?.className;
                console.log(`書籤 ${index + 1}: ${title} (${id}) - ${colorClass}`);
            });
        });
    </script>
</body>
</html>